(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[610],{2045:function(s,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/client",function(){return e(5585)}])},4169:function(s,n,e){"use strict";var a=e(5893),c=e(9008);n.Z=function(s){var n=s.title;return(0,a.jsx)(c.default,{children:(0,a.jsxs)("title",{children:[n," | Morpheus GraphQL"]})})}},5585:function(s,n,e){"use strict";e.r(n);var a=e(5893),c=e(4169);function t(s){var n=Object.assign({h2:"h2",div:"div",pre:"pre",code:"code",span:"span",p:"p",ul:"ul",li:"li",a:"a"},s.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Z,{title:"Morpheus GraphQL Client"}),"\n",(0,a.jsx)(n.h2,{children:"Morpheus GraphQL Client with Template haskell QuasiQuotes"}),"\n",(0,a.jsx)(n.div,{className:"remark-highlight",children:(0,a.jsx)(n.pre,{className:"language-hs",children:(0,a.jsxs)(n.code,{className:"language-hs",children:[(0,a.jsx)(n.span,{className:"token hvariable",children:"defineByDocumentFile"}),"\n    ",(0,a.jsx)(n.span,{className:"token string",children:'"./schema.gql"'}),"\n  ",(0,a.jsx)(n.span,{className:"token punctuation",children:"["}),(0,a.jsx)(n.span,{className:"token hvariable",children:"gql"}),(0,a.jsx)(n.span,{className:"token operator",children:"|"}),"\n    ",(0,a.jsx)(n.span,{className:"token hvariable",children:"query"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"GetHero"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token operator",children:"$"}),(0,a.jsx)(n.span,{className:"token hvariable",children:"character"}),(0,a.jsx)(n.span,{className:"token operator",children:":"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Character"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),"\n      ",(0,a.jsx)(n.span,{className:"token punctuation",children:"{"}),"\n        ",(0,a.jsx)(n.span,{className:"token hvariable",children:"deity"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token hvariable",children:"fatherOf"}),(0,a.jsx)(n.span,{className:"token operator",children:":$"}),(0,a.jsx)(n.span,{className:"token hvariable",children:"character"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"{"}),"\n          ",(0,a.jsx)(n.span,{className:"token hvariable",children:"name"}),"\n          ",(0,a.jsx)(n.span,{className:"token hvariable",children:"power"}),"\n          ",(0,a.jsx)(n.span,{className:"token hvariable",children:"worships"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"{"}),"\n            ",(0,a.jsx)(n.span,{className:"token hvariable",children:"deity2Name"}),(0,a.jsx)(n.span,{className:"token operator",children:":"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"name"}),"\n          ",(0,a.jsx)(n.span,{className:"token punctuation",children:"}"}),"\n        ",(0,a.jsx)(n.span,{className:"token punctuation",children:"}"}),"\n      ",(0,a.jsx)(n.span,{className:"token punctuation",children:"}"}),"\n  ",(0,a.jsx)(n.span,{className:"token operator",children:"|"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"]"}),"\n"]})})}),"\n",(0,a.jsx)(n.p,{children:"with schema:"}),"\n",(0,a.jsx)(n.div,{className:"remark-highlight",children:(0,a.jsx)(n.pre,{className:"language-graphql",children:(0,a.jsxs)(n.code,{className:"language-graphql",children:[(0,a.jsx)(n.span,{className:"token keyword",children:"input"})," ",(0,a.jsx)(n.span,{className:"token object",children:"Character"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"{"}),"\n  ",(0,a.jsx)(n.span,{className:"token attr-name",children:"name"}),(0,a.jsx)(n.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(n.span,{className:"token scalar",children:"String"}),(0,a.jsx)(n.span,{className:"token operator",children:"!"}),"\n",(0,a.jsx)(n.span,{className:"token punctuation",children:"}"}),"\n\n",(0,a.jsx)(n.span,{className:"token keyword",children:"type"})," ",(0,a.jsx)(n.span,{className:"token class-name",children:"Deity"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"{"}),"\n  ",(0,a.jsx)(n.span,{className:"token attr-name",children:"name"}),(0,a.jsx)(n.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(n.span,{className:"token scalar",children:"String"}),(0,a.jsx)(n.span,{className:"token operator",children:"!"}),"\n  ",(0,a.jsx)(n.span,{className:"token attr-name",children:"worships"}),(0,a.jsx)(n.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(n.span,{className:"token class-name",children:"Deity"}),"\n  ",(0,a.jsx)(n.span,{className:"token attr-name",children:"power"}),(0,a.jsx)(n.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(n.span,{className:"token class-name",children:"Power"}),(0,a.jsx)(n.span,{className:"token operator",children:"!"}),"\n",(0,a.jsx)(n.span,{className:"token punctuation",children:"}"}),"\n\n",(0,a.jsx)(n.span,{className:"token keyword",children:"enum"})," ",(0,a.jsx)(n.span,{className:"token class-name",children:"Power"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"{"}),"\n  ",(0,a.jsx)(n.span,{className:"token property",children:"Lightning"}),"\n  ",(0,a.jsx)(n.span,{className:"token property",children:"Teleportation"}),"\n  ",(0,a.jsx)(n.span,{className:"token property",children:"Omniscience"}),"\n",(0,a.jsx)(n.span,{className:"token punctuation",children:"}"}),"\n"]})})}),"\n",(0,a.jsx)(n.p,{children:"will validate query and Generate:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"namespaced response and variable types"}),"\n",(0,a.jsxs)(n.li,{children:["instance for ",(0,a.jsx)(n.code,{children:"Fetch"})," typeClass"]}),"\n"]}),"\n",(0,a.jsx)(n.div,{className:"remark-highlight",children:(0,a.jsx)(n.pre,{className:"language-haskell",children:(0,a.jsxs)(n.code,{className:"language-haskell",children:[(0,a.jsx)(n.span,{className:"token keyword",children:"data"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"GetHero"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token constant",children:"GetHero"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"{"}),"\n  ",(0,a.jsx)(n.span,{className:"token hvariable",children:"deity"}),(0,a.jsx)(n.span,{className:"token operator",children:":"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"DeityDeity"}),"\n",(0,a.jsx)(n.span,{className:"token punctuation",children:"}"}),"\n\n",(0,a.jsx)(n.span,{className:"token comment",children:"-- from: {user"}),"\n",(0,a.jsx)(n.span,{className:"token keyword",children:"data"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"DeityDeity"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token constant",children:"DeityDeity"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"{"}),"\n  ",(0,a.jsx)(n.span,{className:"token hvariable",children:"name"}),(0,a.jsx)(n.span,{className:"token operator",children:":"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Text"}),(0,a.jsx)(n.span,{className:"token punctuation",children:","}),"\n  ",(0,a.jsx)(n.span,{className:"token hvariable",children:"worships"}),(0,a.jsx)(n.span,{className:"token operator",children:":"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Maybe"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"DeityWorshipsDeity"}),"\n  ",(0,a.jsx)(n.span,{className:"token hvariable",children:"power"}),(0,a.jsx)(n.span,{className:"token operator",children:":"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Power"}),"\n",(0,a.jsx)(n.span,{className:"token punctuation",children:"}"}),"\n\n",(0,a.jsx)(n.span,{className:"token comment",children:"-- from: {deity{worships"}),"\n",(0,a.jsx)(n.span,{className:"token keyword",children:"data"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"DeityWorshipsDeity"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token constant",children:"DeityWorshipsDeity"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"{"}),"\n  ",(0,a.jsx)(n.span,{className:"token hvariable",children:"name"}),(0,a.jsx)(n.span,{className:"token operator",children:":"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Text"}),(0,a.jsx)(n.span,{className:"token punctuation",children:","}),"\n",(0,a.jsx)(n.span,{className:"token punctuation",children:"}"}),"\n\n",(0,a.jsx)(n.span,{className:"token keyword",children:"data"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Power"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="}),"\n    ",(0,a.jsx)(n.span,{className:"token constant",children:"PowerLightning"}),"\n  ",(0,a.jsx)(n.span,{className:"token operator",children:"|"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"PowerTeleportation"}),"\n  ",(0,a.jsx)(n.span,{className:"token operator",children:"|"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"PowerOmniscience"}),"\n\n",(0,a.jsx)(n.span,{className:"token keyword",children:"data"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"GetHeroArgs"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token constant",children:"GetHeroArgs"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"{"}),"\n  ",(0,a.jsx)(n.span,{className:"token hvariable",children:"character"}),(0,a.jsx)(n.span,{className:"token operator",children:":"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Character"}),"\n",(0,a.jsx)(n.span,{className:"token punctuation",children:"}"}),"\n\n",(0,a.jsx)(n.span,{className:"token keyword",children:"data"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Character"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Character"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"{"}),"\n  ",(0,a.jsx)(n.span,{className:"token hvariable",children:"name"}),(0,a.jsx)(n.span,{className:"token operator",children:":"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Person"}),"\n",(0,a.jsx)(n.span,{className:"token punctuation",children:"}"}),"\n"]})})}),"\n",(0,a.jsxs)(n.p,{children:["as you see, response type field name collision can be handled with GraphQL ",(0,a.jsx)(n.code,{children:"alias"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["with ",(0,a.jsx)(n.code,{children:"fetch"})," you can fetch well typed response ",(0,a.jsx)(n.code,{children:"GetHero"}),"."]}),"\n",(0,a.jsx)(n.div,{className:"remark-highlight",children:(0,a.jsx)(n.pre,{className:"language-haskell",children:(0,a.jsxs)(n.code,{className:"language-haskell",children:[(0,a.jsx)(n.span,{className:"token hvariable",children:"fetchHero"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"::"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Args"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"GetHero"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"->"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token constant",children:"Either"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token constant",children:"FetchError"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"GetHero"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"GetHero"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),"\n  ",(0,a.jsx)(n.span,{className:"token hvariable",children:"fetchHero"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"fetch"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"jsonRes"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"args"}),"\n      ",(0,a.jsx)(n.span,{className:"token keyword",children:"where"}),"\n        ",(0,a.jsx)(n.span,{className:"token hvariable",children:"args"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token constant",children:"GetHeroArgs"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"{"}),(0,a.jsx)(n.span,{className:"token hvariable",children:"character"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Person"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"{"}),(0,a.jsx)(n.span,{className:"token hvariable",children:"name"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token string",children:'"Zeus"'}),(0,a.jsx)(n.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"}"}),"\n        ",(0,a.jsx)(n.span,{className:"token hvariable",children:"jsonRes"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"::"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"ByteString"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"->"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"ByteString"}),"\n        ",(0,a.jsx)(n.span,{className:"token hvariable",children:"jsonRes"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token operator",children:"<"}),(0,a.jsx)(n.span,{className:"token constant",children:"GraphQL"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"APi"}),(0,a.jsx)(n.span,{className:"token operator",children:">"}),"\n"]})})}),"\n",(0,a.jsxs)(n.p,{children:["in this case, ",(0,a.jsx)(n.code,{children:"jsonRes"})," resolves a request into a response in some monad ",(0,a.jsx)(n.code,{children:"m"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["A ",(0,a.jsx)(n.code,{children:"fetch"})," resolver implementation against ",(0,a.jsx)(n.a,{href:"https://swapi.graph.cool",children:"a real API"})," may look like the following:"]}),"\n",(0,a.jsx)(n.div,{className:"remark-highlight",children:(0,a.jsx)(n.pre,{className:"language-haskell",children:(0,a.jsxs)(n.code,{className:"language-haskell",children:[(0,a.jsx)(n.span,{className:"token comment",children:"{-# LANGUAGE OverloadedStrings #-}"}),"\n\n",(0,a.jsxs)(n.span,{className:"token import-statement",children:[(0,a.jsx)(n.span,{className:"token keyword",children:"import"})," Data",(0,a.jsx)(n.span,{className:"token punctuation",children:"."}),"ByteString",(0,a.jsx)(n.span,{className:"token punctuation",children:"."}),"Lazy"]})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token constant",children:"ByteString"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),"\n",(0,a.jsxs)(n.span,{className:"token import-statement",children:[(0,a.jsx)(n.span,{className:"token keyword",children:"import"})," ",(0,a.jsx)(n.span,{className:"token keyword",children:"qualified"})," Data",(0,a.jsx)(n.span,{className:"token punctuation",children:"."}),"ByteString",(0,a.jsx)(n.span,{className:"token punctuation",children:"."}),"Char8 ",(0,a.jsx)(n.span,{className:"token keyword",children:"as"})," C8"]}),"\n",(0,a.jsxs)(n.span,{className:"token import-statement",children:[(0,a.jsx)(n.span,{className:"token keyword",children:"import"})," Network",(0,a.jsx)(n.span,{className:"token punctuation",children:"."}),"HTTP",(0,a.jsx)(n.span,{className:"token punctuation",children:"."}),"Req"]}),"\n\n",(0,a.jsx)(n.span,{className:"token hvariable",children:"resolver"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"::"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"String"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"->"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"ByteString"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"->"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"IO"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"ByteString"}),"\n",(0,a.jsx)(n.span,{className:"token hvariable",children:"resolver"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"tok"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"b"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"runReq"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"defaultHttpConfig"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"$"})," ",(0,a.jsx)(n.span,{className:"token keyword",children:"do"}),"\n    ",(0,a.jsx)(n.span,{className:"token keyword",children:"let"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"headers"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"header"})," ",(0,a.jsx)(n.span,{className:"token string",children:'"Content-Type"'})," ",(0,a.jsx)(n.span,{className:"token string",children:'"application/json"'}),"\n    ",(0,a.jsx)(n.span,{className:"token hvariable",children:"responseBody"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"<$>"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"req"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"POST"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token hvariable",children:"https"})," ",(0,a.jsx)(n.span,{className:"token string",children:'"swapi.graph.cool"'}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token constant",children:"ReqBodyLbs"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"b"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"lbsResponse"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"headers"}),"\n"]})})}),"\n",(0,a.jsx)(n.p,{children:"this is demonstrated in examples/src/Client/StarWarsClient.hs"}),"\n",(0,a.jsxs)(n.p,{children:["types can be generated from ",(0,a.jsx)(n.code,{children:"introspection"})," too:"]}),"\n",(0,a.jsx)(n.div,{className:"remark-highlight",children:(0,a.jsx)(n.pre,{className:"language-haskell",children:(0,a.jsxs)(n.code,{className:"language-haskell",children:[(0,a.jsx)(n.span,{className:"token hvariable",children:"defineByIntrospectionFile"})," ",(0,a.jsx)(n.span,{className:"token string",children:'"./introspection.json"'}),"\n"]})})})]})}n.default=function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=s.components||{},e=n.wrapper;return e?(0,a.jsx)(e,Object.assign({},s,{children:(0,a.jsx)(t,s)})):t(s)}},9008:function(s,n,e){s.exports=e(3121)}},function(s){s.O(0,[774,888,179],(function(){return n=2045,s(s.s=n);var n}));var n=s.O();_N_E=n}]);