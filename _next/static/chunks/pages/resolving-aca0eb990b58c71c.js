(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[943],{1102:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/resolving",function(){return s(3725)}])},7854:function(e,n,s){"use strict";s.d(n,{$:function(){return o}});var a=s(5893),t=s(7294),c=s(9450),l={color:"black",textDecoration:"none",padding:"0.1rem 0rem"},o=function(e){var n=e.id,s=e.children,o=e.level,i=void 0===o?1:o;return(0,(0,t.useContext)(c.L)[1])({id:n,level:i,children:s}),1===i?(0,a.jsx)("h2",{id:"".concat(n),style:l,children:s}):(0,a.jsx)("h3",{id:"".concat(n),style:l,children:s})};n.Z=o},4169:function(e,n,s){"use strict";var a=s(5893),t=s(9008);n.Z=function(e){var n=e.title;return(0,a.jsx)(t.default,{children:(0,a.jsxs)("title",{children:[n," | Morpheus GraphQL"]})})}},3725:function(e,n,s){"use strict";s.r(n);var a=s(5893),t=s(1151),c=s(4169),l=s(7854);function o(e){var n=Object.assign({h1:"h1",p:"p",ol:"ol",li:"li",strong:"strong",code:"code",div:"div",pre:"pre",span:"span"},(0,t.ah)(),e.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Z,{title:"Named Resolvers"}),"\n",(0,a.jsx)(n.h1,{children:"Resolving"}),"\n",(0,a.jsx)(n.p,{children:"Morpheus GraphQL provides two way of type resolving."}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Values as resolvers"}),": In this approach, you specify values\nfor the type definitions, where the resolvers are regular functions."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Named resolvers"}),": In this approach, we use the type class ",(0,a.jsx)(n.code,{children:"ResolveNamed"})," to define the\nresolver for each type. More information on this approach can be\nfound in the next section."]}),"\n"]}),"\n",(0,a.jsx)(l.Z,{id:"named-resolvers",level:1,children:(0,a.jsx)(n.p,{children:"Named Resolvers"})}),"\n",(0,a.jsxs)(n.p,{children:["As mentioned earlier, in this approach we use ",(0,a.jsx)(n.code,{children:"ResolveNamed"}),"\nto define the resolver function for each type. In this resolver definition,\neach type also defines its dependency (identifier), which is used by the\ncompiler to provide a corresponding output resolution for certain input values.\nThat is, if we want to resolve a type as a field of another type, we must\nspecify a type dependency value for that particular type\ninstead of the type value. For a better illustration,\nlet's look at the following example:"]}),"\n",(0,a.jsx)(l.Z,{id:"app-posts",level:2,children:(0,a.jsx)(n.p,{children:"App/Posts.hs"})}),"\n",(0,a.jsx)(n.p,{children:"Let's say we want to create a GraphQL app for\na blogging website where we can either retrieve\nall posts or retrieve them by ID. Scheme definition for this\napplication would be as follows."}),"\n",(0,a.jsx)(n.div,{className:"remark-highlight",children:(0,a.jsx)(n.pre,{className:"language-haskell",children:(0,a.jsxs)(n.code,{className:"language-haskell",children:[(0,a.jsx)(n.span,{className:"token keyword",children:"newtype"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Post"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Post"}),"\n  ",(0,a.jsx)(n.span,{className:"token punctuation",children:"{"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"title"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"::"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Text"}),"\n  ",(0,a.jsx)(n.span,{className:"token punctuation",children:"}"}),"\n  ",(0,a.jsx)(n.span,{className:"token keyword",children:"deriving"}),"\n    ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Generic"}),(0,a.jsx)(n.span,{className:"token punctuation",children:","}),"\n      ",(0,a.jsx)(n.span,{className:"token constant",children:"GQLType"}),"\n    ",(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),"\n\n",(0,a.jsx)(n.span,{className:"token keyword",children:"data"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Query"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Query"}),"\n  ",(0,a.jsx)(n.span,{className:"token punctuation",children:"{"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"posts"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"::"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"["}),(0,a.jsx)(n.span,{className:"token constant",children:"Post"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"]"}),(0,a.jsx)(n.span,{className:"token punctuation",children:","}),"\n    ",(0,a.jsx)(n.span,{className:"token hvariable",children:"post"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"::"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Arg"})," ",(0,a.jsx)(n.span,{className:"token string",children:'"id"'})," ",(0,a.jsx)(n.span,{className:"token constant",children:"ID"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"->"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token constant",children:"Maybe"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token constant",children:"Post"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),"\n  ",(0,a.jsx)(n.span,{className:"token punctuation",children:"}"}),"\n  ",(0,a.jsx)(n.span,{className:"token keyword",children:"deriving"}),"\n    ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Generic"}),(0,a.jsx)(n.span,{className:"token punctuation",children:","}),"\n      ",(0,a.jsx)(n.span,{className:"token constant",children:"GQLType"}),"\n    ",(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),"\n"]})})}),"\n",(0,a.jsxs)(n.p,{children:["Now that we have type definitions, we can define their resolvers,\nstarting with type ",(0,a.jsx)(n.code,{children:"Post"}),". The following instance specifies that for each unique ",(0,a.jsx)(n.code,{children:"ID"}),"\nwe can resolve the corresponding ",(0,a.jsx)(n.code,{children:"Post"}),", where the post ",(0,a.jsx)(n.code,{children:"title"})," is retrieved by the post ",(0,a.jsx)(n.code,{children:"ID"}),"."]}),"\n",(0,a.jsx)(n.div,{className:"remark-highlight",children:(0,a.jsx)(n.pre,{className:"language-haskell",children:(0,a.jsxs)(n.code,{className:"language-haskell",children:[(0,a.jsx)(n.span,{className:"token keyword",children:"instance"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Monad"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"=>"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"ResolveNamed"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token constant",children:"Post"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token constant",children:"NamedResolverT"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(n.span,{className:"token keyword",children:"where"}),"\n  ",(0,a.jsx)(n.span,{className:"token keyword",children:"type"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Dep"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token constant",children:"Post"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token constant",children:"NamedResolverT"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token constant",children:"ID"}),"\n  ",(0,a.jsx)(n.span,{className:"token hvariable",children:"resolveNamed"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"uid"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="}),"\n    ",(0,a.jsx)(n.span,{className:"token hvariable",children:"pure"}),"\n      ",(0,a.jsx)(n.span,{className:"token constant",children:"Post"}),"\n        ",(0,a.jsx)(n.span,{className:"token punctuation",children:"{"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"title"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"resolve"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token hvariable",children:"getPostTitleById"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"uid"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),"\n        ",(0,a.jsx)(n.span,{className:"token punctuation",children:"}"}),"\n"]})})}),"\n",(0,a.jsx)(n.p,{children:"Let's go to the next step and define a query resolver. Since the query does not\nrequire an ID, we define its dependency with the unit type."}),"\n",(0,a.jsxs)(n.p,{children:["To resolve the ",(0,a.jsx)(n.code,{children:"post"})," and ",(0,a.jsx)(n.code,{children:"posts"})," fields, we only get post ids and\npass them to the resolve function, which then resolves the\ncorresponding ",(0,a.jsx)(n.code,{children:"Post"})," values by calling the ",(0,a.jsx)(n.code,{children:"ResolveNamed"}),"\ninstance of the type ",(0,a.jsx)(n.code,{children:"Post"})," with those ids."]}),"\n",(0,a.jsx)(n.div,{className:"remark-highlight",children:(0,a.jsx)(n.pre,{className:"language-haskell",children:(0,a.jsxs)(n.code,{className:"language-haskell",children:[(0,a.jsx)(n.span,{className:"token keyword",children:"instance"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Monad"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"=>"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"ResolveNamed"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token constant",children:"Query"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token constant",children:"NamedResolverT"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(n.span,{className:"token keyword",children:"where"}),"\n  ",(0,a.jsx)(n.span,{className:"token keyword",children:"type"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Dep"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token constant",children:"Query"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token constant",children:"NamedResolverT"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),"\n  ",(0,a.jsx)(n.span,{className:"token hvariable",children:"resolveNamed"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="}),"\n    ",(0,a.jsx)(n.span,{className:"token hvariable",children:"pure"}),"\n      ",(0,a.jsx)(n.span,{className:"token constant",children:"Query"}),"\n        ",(0,a.jsx)(n.span,{className:"token punctuation",children:"{"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"posts"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"resolve"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"getPostIds"}),(0,a.jsx)(n.span,{className:"token punctuation",children:","}),"\n          ",(0,a.jsx)(n.span,{className:"token hvariable",children:"post"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token operator",children:"\\"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token constant",children:"Arg"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"arg"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"->"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"resolve"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token hvariable",children:"pure"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token constant",children:"Just"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"arg"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),"\n        ",(0,a.jsx)(n.span,{className:"token punctuation",children:"}"}),"\n"]})})}),"\n",(0,a.jsxs)(n.p,{children:["In the last step, we can derive the GraphQL application using\nthe data type ",(0,a.jsx)(n.code,{children:"NamedResolvers"})," by using a single constructor\n",(0,a.jsx)(n.code,{children:"NamedResolvers"})," without any fields."]}),"\n",(0,a.jsx)(n.div,{className:"remark-highlight",children:(0,a.jsx)(n.pre,{className:"language-haskell",children:(0,a.jsxs)(n.code,{className:"language-haskell",children:[(0,a.jsx)(n.span,{className:"token hvariable",children:"postsApp"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"::"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"App"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"IO"}),"\n",(0,a.jsx)(n.span,{className:"token hvariable",children:"postsApp"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="}),"\n  ",(0,a.jsx)(n.span,{className:"token hvariable",children:"deriveApp"}),"\n    ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token constant",children:"NamedResolvers"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"::"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"NamedResolvers"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"IO"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Query"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Undefined"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Undefined"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),"\n"]})})}),"\n",(0,a.jsxs)(n.p,{children:["In the background, the function ",(0,a.jsx)(n.code,{children:"deriveApp"})," traverses the data types and calls their\nown instances of ",(0,a.jsx)(n.code,{children:"NamedResolver"})," for each object and union type. In this way,\na ",(0,a.jsx)(n.code,{children:"ResolverMaps"})," (with type ",(0,a.jsx)(n.code,{children:"Map TypeName (DependencyValue -> ResolveValue)"}),") is derived that can\nbe used in GraphQL query execution."]}),"\n",(0,a.jsxs)(n.p,{children:["As you can see, the ",(0,a.jsx)(n.code,{children:"ResolverMaps"})," derived in this way can be\nmerged if the types with the same name have the same GraphQL\nkind and the same dependency.\nTherefore, types in applications derived with ",(0,a.jsx)(n.code,{children:"NamedResolvers"})," can be safely extended,\nwhich we will see in the next section."]}),"\n",(0,a.jsx)(l.Z,{id:"app-authors",level:2,children:(0,a.jsx)(n.p,{children:"App/Authors.hs"})}),"\n",(0,a.jsxs)(n.p,{children:["Let's say there is another team that wants to use the ",(0,a.jsx)(n.code,{children:"Posts"})," application as well,\nbut also needs to provide ",(0,a.jsx)(n.code,{children:"Authors"})," information. The new application should\nallow querying of all existing ",(0,a.jsx)(n.code,{children:"Authors"})," and extend the post type with the field ",(0,a.jsx)(n.code,{children:"author"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["One way to address these new requirements would be to rewrite our old application,\nbut that will impact (or even break) the existing application. Here, named resolvers can\nbe of additional help to us, as ",(0,a.jsx)(n.code,{children:"Apps"})," derived with named resolvers can be merged.\nWe can define our ",(0,a.jsx)(n.code,{children:"Authors"})," app separately and then merge it with the existing one."]}),"\n",(0,a.jsx)(n.p,{children:"In the following code snippets we define the Author and Query types."}),"\n",(0,a.jsx)(n.div,{className:"remark-highlight",children:(0,a.jsx)(n.pre,{className:"language-haskell",children:(0,a.jsxs)(n.code,{className:"language-haskell",children:[(0,a.jsx)(n.span,{className:"token keyword",children:"data"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Author"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Author"}),"\n  ",(0,a.jsx)(n.span,{className:"token punctuation",children:"{"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"name"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"::"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Text"}),(0,a.jsx)(n.span,{className:"token punctuation",children:","}),"\n    ",(0,a.jsx)(n.span,{className:"token hvariable",children:"posts"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"::"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"["}),(0,a.jsx)(n.span,{className:"token constant",children:"Post"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"]"}),"\n  ",(0,a.jsx)(n.span,{className:"token punctuation",children:"}"})," ",(0,a.jsx)(n.span,{className:"token keyword",children:"deriving"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token constant",children:"Generic"}),(0,a.jsx)(n.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(n.span,{className:"token constant",children:"GQLType"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),"\n\n",(0,a.jsx)(n.span,{className:"token keyword",children:"data"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Query"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Query"}),"\n  ",(0,a.jsx)(n.span,{className:"token punctuation",children:"{"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"authors"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"::"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"["}),(0,a.jsx)(n.span,{className:"token constant",children:"Author"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"]"}),"\n  ",(0,a.jsx)(n.span,{className:"token punctuation",children:"}"}),"\n  ",(0,a.jsx)(n.span,{className:"token keyword",children:"deriving"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token constant",children:"Generic"}),(0,a.jsx)(n.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(n.span,{className:"token constant",children:"GQLType"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),"\n"]})})}),"\n",(0,a.jsxs)(n.p,{children:["As you can see, we can query ",(0,a.jsx)(n.code,{children:"authors"}),", with each ",(0,a.jsx)(n.code,{children:"Author"})," having their fields ",(0,a.jsx)(n.code,{children:"name"})," and ",(0,a.jsx)(n.code,{children:"posts"}),".\nin the same manner as before, we can also provide their resolver implementation."]}),"\n",(0,a.jsx)(n.div,{className:"remark-highlight",children:(0,a.jsx)(n.pre,{className:"language-haskell",children:(0,a.jsxs)(n.code,{className:"language-haskell",children:[(0,a.jsx)(n.span,{className:"token keyword",children:"instance"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Monad"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"=>"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"ResolveNamed"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token constant",children:"Author"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token constant",children:"NamedResolverT"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(n.span,{className:"token keyword",children:"where"}),"\n  ",(0,a.jsx)(n.span,{className:"token keyword",children:"type"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Dep"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token constant",children:"Author"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token constant",children:"NamedResolverT"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token constant",children:"ID"}),"\n  ",(0,a.jsx)(n.span,{className:"token hvariable",children:"resolveNamed"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"uid"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="}),"\n    ",(0,a.jsx)(n.span,{className:"token hvariable",children:"pure"}),"\n      ",(0,a.jsx)(n.span,{className:"token constant",children:"Author"}),"\n        ",(0,a.jsx)(n.span,{className:"token punctuation",children:"{"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"name"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"resolve"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token hvariable",children:"getAuthorName"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"uid"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),(0,a.jsx)(n.span,{className:"token punctuation",children:","}),"\n          ",(0,a.jsx)(n.span,{className:"token hvariable",children:"posts"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"resolve"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token hvariable",children:"getAuthorPosts"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"uid"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),"\n        ",(0,a.jsx)(n.span,{className:"token punctuation",children:"}"}),"\n\n",(0,a.jsx)(n.span,{className:"token keyword",children:"instance"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Monad"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"=>"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"ResolveNamed"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token constant",children:"Query"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token constant",children:"NamedResolverT"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(n.span,{className:"token keyword",children:"where"}),"\n  ",(0,a.jsx)(n.span,{className:"token keyword",children:"type"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Dep"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token constant",children:"Query"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token constant",children:"NamedResolverT"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),"\n  ",(0,a.jsx)(n.span,{className:"token hvariable",children:"resolveNamed"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"pure"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Query"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"{"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"authors"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"resolve"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"getAuthorIds"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"}"}),"\n"]})})}),"\n",(0,a.jsx)(n.p,{children:"At this stage, we have already implemented Authors and Query and now we can also\nstart thinking about the Post Type."}),"\n",(0,a.jsxs)(n.p,{children:["First note, that the post type used in this app does not need to\nbe imported from the ",(0,a.jsx)(n.code,{children:"App/Posts.hs"}),". We can simply define our type ",(0,a.jsx)(n.code,{children:"Post"})," with the new\nfield ",(0,a.jsx)(n.code,{children:"author"})," and all other fields associated with the post type will be automatically\ncompleted by the app ",(0,a.jsx)(n.code,{children:"App/Posts.hs"}),", after the merging."]}),"\n",(0,a.jsx)(n.div,{className:"remark-highlight",children:(0,a.jsx)(n.pre,{className:"language-haskell",children:(0,a.jsxs)(n.code,{className:"language-haskell",children:[(0,a.jsx)(n.span,{className:"token comment",children:"-- is alternative to extend type"}),"\n",(0,a.jsx)(n.span,{className:"token keyword",children:"newtype"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Post"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Post"}),"\n  ",(0,a.jsx)(n.span,{className:"token punctuation",children:"{"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"author"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"::"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token constant",children:"Author"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),"\n  ",(0,a.jsx)(n.span,{className:"token punctuation",children:"}"})," ",(0,a.jsx)(n.span,{className:"token keyword",children:"deriving"}),"\n    ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Generic"}),"\n    ",(0,a.jsx)(n.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(n.span,{className:"token constant",children:"GQLType"}),"\n    ",(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),"\n"]})})}),"\n",(0,a.jsxs)(n.p,{children:["Now we can start implementing the resolver for it.\nIt is of critical importance here, that the dependency of this type\nis the same as the dependency of ",(0,a.jsx)(n.code,{children:"Post"})," in ",(0,a.jsx)(n.code,{children:"App/Posts.hs"}),". If the\nargument of the function does not match, one of the implementations\nwill be unable to decode the argument during resolution and it will fail."]}),"\n",(0,a.jsx)(n.div,{className:"remark-highlight",children:(0,a.jsx)(n.pre,{className:"language-haskell",children:(0,a.jsxs)(n.code,{className:"language-haskell",children:[(0,a.jsx)(n.span,{className:"token keyword",children:"instance"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Monad"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"=>"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"ResolveNamed"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token constant",children:"Post"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token constant",children:"NamedResolverT"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(n.span,{className:"token keyword",children:"where"}),"\n  ",(0,a.jsx)(n.span,{className:"token keyword",children:"type"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Dep"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token constant",children:"Post"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token constant",children:"NamedResolverT"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"m"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token constant",children:"ID"}),"\n  ",(0,a.jsx)(n.span,{className:"token hvariable",children:"resolveNamed"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"uid"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="}),"\n    ",(0,a.jsx)(n.span,{className:"token hvariable",children:"pure"}),"\n      ",(0,a.jsx)(n.span,{className:"token constant",children:"Post"}),"\n        ",(0,a.jsx)(n.span,{className:"token punctuation",children:"{"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"author"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"resolve"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token hvariable",children:"pure"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"uid"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),"\n        ",(0,a.jsx)(n.span,{className:"token punctuation",children:"}"}),"\n"]})})}),"\n",(0,a.jsx)(n.p,{children:"Since all resolvers are implemented, we can also derive the application.\nNote that this application can be used as a standalone application, however\nthe standalone version can only display the information provided by the Authors,\ni.e. the Post type will only have one field authors,\nand in the query we can only access authors."}),"\n",(0,a.jsx)(n.div,{className:"remark-highlight",children:(0,a.jsx)(n.pre,{className:"language-haskell",children:(0,a.jsxs)(n.code,{className:"language-haskell",children:[(0,a.jsx)(n.span,{className:"token hvariable",children:"authorsApp"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"::"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"App"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"IO"}),"\n",(0,a.jsx)(n.span,{className:"token hvariable",children:"authorsApp"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="}),"\n  ",(0,a.jsx)(n.span,{className:"token hvariable",children:"deriveApp"}),"\n    ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token constant",children:"NamedResolvers"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"::"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"NamedResolvers"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"IO"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Query"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Undefined"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"Undefined"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),"\n"]})})}),"\n",(0,a.jsx)(n.p,{children:"However, if we want to access information from both apps,\nthe next section will show us how to merge them."}),"\n",(0,a.jsx)(l.Z,{id:"merged-app",level:2,children:(0,a.jsx)(n.p,{children:"App.hs"})}),"\n",(0,a.jsxs)(n.p,{children:["The data type ",(0,a.jsx)(n.code,{children:"App"})," has a ",(0,a.jsx)(n.code,{children:"Semigroup"})," instance that allows to\njoin multiple apps together."]}),"\n",(0,a.jsx)(n.div,{className:"remark-highlight",children:(0,a.jsx)(n.pre,{className:"language-haskell",children:(0,a.jsxs)(n.code,{className:"language-haskell",children:[(0,a.jsx)(n.span,{className:"token hvariable",children:"app"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"::"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"App"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(n.span,{className:"token constant",children:"IO"}),"\n",(0,a.jsx)(n.span,{className:"token hvariable",children:"app"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"authorsApp"})," ",(0,a.jsx)(n.span,{className:"token operator",children:"<>"})," ",(0,a.jsx)(n.span,{className:"token hvariable",children:"postsApp"}),"\n"]})})}),"\n",(0,a.jsxs)(n.p,{children:["Since both the ",(0,a.jsx)(n.code,{children:"Post"})," type definitions have the same dependency ",(0,a.jsx)(n.code,{children:"ID"}),",\nthe interpreter safely merge these two apps where type\n",(0,a.jsx)(n.code,{children:"Post"})," will be extended with new field ",(0,a.jsx)(n.code,{children:"author"}),"."]})]})}n.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,t.ah)(),e.components),s=n.wrapper;return s?(0,a.jsx)(s,Object.assign({},e,{children:(0,a.jsx)(o,e)})):o(e)}},9008:function(e,n,s){e.exports=s(3121)},1151:function(e,n,s){"use strict";s.d(n,{ah:function(){return c}});var a=s(7294);const t=a.createContext({});function c(e){const n=a.useContext(t);return a.useMemo((()=>"function"===typeof e?e(n):{...n,...e}),[n,e])}}},function(e){e.O(0,[774,888,179],(function(){return n=1102,e(e.s=n);var n}));var n=e.O();_N_E=n}]);